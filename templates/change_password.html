{% extends 'layout/base.html' %}
{% block content %}
<div class="container mt-5">
  <h3>Change Password</h3>
  <form method="POST" onsubmit="return confirmPasswordChange()">
    <div class="form-group mt-3">
      <label>Old Password</label>
      <input type="password" class="form-control" name="old_password" required minlength="6">
    </div>
    <div class="form-group mt-3">
      <label>New Password</label>
      <!--  VALIDATION: minlength -->
      <input type="password" class="form-control" name="new_password" required minlength="6" id="newPass">
      <small class="text-muted">Minimum 6 characters</small>
    </div>
    <div class="form-group mt-3">
      <label>Confirm New Password</label>
      <input type="password" class="form-control" name="confirm_password" required minlength="6" id="confirmPass">
    </div>
    <button type="submit" class="btn btn-primary mt-3">Update Password</button>
    <a href="{{ url_for('staff_dashboard') }}" class="btn btn-secondary mt-3">Cancel</a>
  </form>
</div>

<script>
function confirmPasswordChange() {
  const newPass = document.getElementById('newPass').value;
  const confirmPass = document.getElementById('confirmPass').value;
  
  // ✅ VALIDATION: password match
  if (newPass !== confirmPass) {
    alert("❌ New passwords do not match!");
    return false;
  }
  
  return confirm("⚠️ Are you sure you want to change your password?");
}
</script>
{% endblock %}